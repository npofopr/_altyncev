<!DOCTYPE html>
<html lang="ru">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="ru">

    
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="preconnect" href="//ajax.googleapis.com">
    <link rel="dns-prefetch" href="https://use.fontawesome.com">
    <link rel="preconnect" href="https://use.fontawesome.com" crossorigin>
    <link rel="preconnect" href="//cdnjs.cloudflare.com">
    <link rel="preconnect" href="//www.googletagmanager.com">
    <link rel="preconnect" href="//www.google-analytics.com">
    <link rel="preconnect" href="//mc.yandex.ru">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">

    <meta name="author" content="Vladislav Altyncev">
    <meta name="description" content="На любой стадии может возникнуть необходимость что-либо отменить. Здесь мы рассмотрим несколько основных инструментов для отмены произведённых изменений. Будьте осторожны, ибо не всегда можно отменить сами отмены.">
    <meta name="keywords" content="blog,developer,personal">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git это просто. Запись №2. Отмена изменений"/>
<meta name="twitter:description" content="На любой стадии может возникнуть необходимость что-либо отменить. Здесь мы рассмотрим несколько основных инструментов для отмены произведённых изменений. Будьте осторожны, ибо не всегда можно отменить сами отмены."/>

    <meta property="og:title" content="Git это просто. Запись №2. Отмена изменений" />
<meta property="og:description" content="На любой стадии может возникнуть необходимость что-либо отменить. Здесь мы рассмотрим несколько основных инструментов для отмены произведённых изменений. Будьте осторожны, ибо не всегда можно отменить сами отмены." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://altyncev.ru/blog/2012-10-01-git_eto_prosto_otmena_izmenenii/" />
<meta property="article:published_time" content="2012-10-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2012-10-01T00:00:00+00:00" />


    <title>
  Git это просто. Запись №2. Отмена изменений · Altyncev Vladislav
</title>

    
      <link rel="canonical" href="https://altyncev.ru/blog/2012-10-01-git_eto_prosto_otmena_izmenenii/">
    

    <link href="https://fonts.googleapis.com/css?family=Gabriela&display=swap&subset=cyrillic,cyrillic-ext" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fork-awesome/1.1.7/css/fork-awesome.min.css" integrity="sha512-9QjPqX/aCNwEQDyMqqMluNOSsHxTwOJNO3d4m5aUeNbyOPm8RcBA5hCUhvGmKFtSmQYGajqPopGtD60FWiWUwg==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" />
    
      
      
      <link rel="stylesheet" href="https://altyncev.ru/css/coder.min.614ec27e30601480e6f78f576733a3757458d35b4ec53a05b9ac4dbe0dfc342d.css" integrity="sha256-YU7CfjBgFIDm949XZzOjdXRY01tOxToFuaxNvg38NC0=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="https://altyncev.ru/css/coder-dark.min.126ad3988d46bdae6217a11105b53c9662bca05f39d42d3c0fb366919d334620.css" integrity="sha256-EmrTmI1Gva5iF6ERBbU8lmK8oF851C08D7NmkZ0zRiA=" crossorigin="anonymous" media="screen" />
      
    

    

    
      
      
        
        <link rel="stylesheet" href="https://altyncev.ru/scss/custom.min.c80b4266c2e473bbcd265ff75587773f79318d2c22b98f94d66e006670afce2c.css" integrity="sha256-yAtCZsLkc7vNJl/3VYd3P3kxjSwiuY&#43;U1m4AZnCvziw=" crossorigin="anonymous" media="screen" />
      
    

    <link rel="icon" type="image/png" href="https://altyncev.ru/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://altyncev.ru/favicon-16x16.png" sizes="16x16">

    <link rel="apple-touch-icon" href="https://altyncev.ru/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://altyncev.ru/images/apple-touch-icon.png">

    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/twemoji.min.js" integrity="sha512-panBjUGuKarjg0qxHggQULmRf9jB/YVCy238hmzBWUuLeOuwMSuJgJcUv3T+rwXUBZ9zeUvc49ZcCRH+EO0H8g==" crossorigin="anonymous"></script>
    

    <meta name="generator" content="Hugo 0.74.3" />

    <style>.async-hide { opacity: 0 !important} </style>
    <script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
    h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
    (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
    })(window,document.documentElement,'async-hide','dataLayer',4000,
    {'GTM-5SXTLZK':true});</script>

    <script>
      var doNotTrack = false;
      if (!doNotTrack) {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-2789259-4', 'auto');
        ga('require', 'GTM-5SXTLZK');
        ga('send', 'pageview');
      }
    </script>
  </head>

  
  
    
  
  <body class="colorscheme-auto"
        onload=" twemoji.parse(document.body); "
  >

     <script type="text/javascript" > (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(17143639, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true }); </script> <noscript><div><img src="https://mc.yandex.ru/watch/17143639" style="position:absolute; left:-9999px;" alt="" /></div></noscript> 

    
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://altyncev.ru/">
      Altyncev Vladislav
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/blog/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/categories/cottage/">Handmade</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/portfolio/">Portfolio</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/categories/">Categories</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Git это просто. Запись №2. Отмена изменений</h1>
    </header>

    
<p>На любой стадии может возникнуть необходимость что-либо отменить. Здесь мы рассмотрим несколько основных инструментов для отмены произведённых изменений. Будьте осторожны, ибо не всегда можно отменить сами отмены.</p>

<!-- Read more -->

<p><span style="text-decoration: underline;"><strong>Изменение последнего коммита</strong></span></p>
<p>Одна из типичных отмен происходит тогда, когда вы делаете коммит слишком рано, забыв добавить какие-то файлы, или напутали с комментарием к коммиту. Если вам хотелось бы сделать этот коммит ещё раз, вы можете выполнить commit с опцией --amend:</p>
<pre title="Изменение последнего коммита">$ git commit --amend</pre>
<p>&nbsp;Для примера, если после совершения коммита вы осознали, что забыли проиндексировать изменения в файле, которые хотели добавить в этот коммит, вы можете сделать что-то подобное:</p>
<pre>$ git commit -m 'initial commit'
$ git add forgotten_file
$ git commit --amend</pre>
<p>&nbsp;Все три команды вместе дают один коммит &mdash; второй коммит заменяет результат первого.</p>
<p><span style="text-decoration: underline;"><strong>Отмена индексации файла</strong></span></p>
<p>Допустим, вы внесли изменения в два файла и хотите записать их как два отдельных коммита, но случайно набрали git add * и проиндексировали оба файла. Как теперь отменить индексацию одного из двух файлов? Команда git status напомнит вам об этом:</p>
<p>Сразу после надписи &laquo;Changes to be committed&raquo;, написано использовать git reset HEAD <file>... для исключения из индекса. Так что давайте последуем совету и отменим индексацию файла benchmarks.rb:</p>
<pre>$ git reset HEAD benchmarks.rb
benchmarks.rb: locally modified
$ git status
# On branch master
# Changes to be committed:
# (use "git reset HEAD <file>..." to unstage)
#
# modified: README.txt
#
# Changed but not updated:
# (use "git add <file>..." to update what will be committed)
# (use "git checkout -- <file>..." to discard changes in working directory)
#
# modified: benchmarks.rb
#</pre>
<p><span style="text-decoration: underline;"><strong>Отмена изменений файла</strong></span></p>
<p>Что, если вы поняли, что не хотите оставлять изменения, внесённые в файл benchmarks.rb?<br /> Как быстро отменить изменения, вернуть то состояние, в котором он находился во время последнего коммита (или первоначального клонирования, или какого-то другого действия, после которого файл попал в рабочий каталог)? К счастью, git status говорит, как добиться и этого. В выводе для последнего примера, неиндексированная область выглядит следующим образом:</p>
<pre># Changed but not updated:
# (use "git add <file>..." to update what will be committed)
# (use "git checkout -- <file>..." to discard changes in working directory)
#
# modified: benchmarks.rb
#</pre>
<p>Здесь довольно ясно сказано, как отменить сделанные изменения (по крайней мере новые версии Git&rsquo;а, начиная с 1.6.1, делают это; если у вас версия старее, мы настоятельно рекомендуем обновиться, чтобы получать такие подсказки и сделать свою работу удобней). Давайте сделаем то, что написано:</p>
<pre>$ git checkout -- benchmarks.rb
$ git status
# On branch master
# Changes to be committed:
# (use "git reset HEAD <file>..." to unstage)
#
# modified: README.txt
#</pre>
<p>Вы должны понимать, что это опасная команда:</p>
<p>Все сделанные вами изменения в этом файле пропали &mdash; вы просто скопировали поверх него другой файл. Никогда не используйте эту команду, если вы не полностью уверены, что этот файл вам не нужен. Если вам нужно просто сделать, чтобы он не мешался, мы рассмотрим прятание (stash) и ветвление в следующей главе; эти способы обычно более предпочтительны.</p>
<p>Помните, что всё, что является частью коммита в Git, почти всегда может быть восстановлено. Даже коммиты, которые находятся на ветках, которые были удалены, и коммиты переписанные с помощью --amend могут быть восстановлены.</p>
<p>Несмотря на это, всё, что никогда не попадало в коммит, вы скорее всего уже не увидите снова.</p>
<p>&nbsp;</p>
<p>The End #2</p>

  </article>
</section>

  

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>Welcome.</p>
      
      
        ©
        
          2012 -
        
        2020
         Vladislav Altyncev 
      
      
         · 
        Работает на <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
        
      
    </section>
  </footer>


    </main>

    
      
        
        <script src="https://altyncev.ru/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js"></script>
      
    

    

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-2789259-4', 'auto');
	
	ga('send', 'pageview');
}
</script>


    

    

    
  </body>

</html>
