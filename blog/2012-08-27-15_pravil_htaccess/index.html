<!DOCTYPE html>
<html lang="ru">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="ru">

    
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="preconnect" href="//ajax.googleapis.com">
    <link rel="dns-prefetch" href="https://use.fontawesome.com">
    <link rel="preconnect" href="https://use.fontawesome.com" crossorigin>
    <link rel="preconnect" href="//cdnjs.cloudflare.com">
    <link rel="preconnect" href="//www.googletagmanager.com">
    <link rel="preconnect" href="//www.google-analytics.com">
    <link rel="preconnect" href="//mc.yandex.ru">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">

    <meta name="author" content="Vladislav Altyncev">
    <meta name="description" content="1. Защита от хотлинкинга &nbsp;с&nbsp;.htaccess Сайты, которые крадут ваш контент могут весьма и весьма раздражать. К тому&nbsp;же они могут повредить рейтинг сайта, так как &nbsp;создают дублируемый в интернете контент. Но есть &nbsp;случаи и похуже&nbsp;&mdash; это сайты, которые не просто &laquo;тырят&raquo; ваш контент, но и&nbsp;не утруждают себя перелинковкой и загрузкой изображений на собственный сервак. А это уж совсем нехорошо.&nbsp;Загрузка изображений с вашего сервера называется хотлинкинг, &nbsp;и это значит, что в таком случае сайт-вор украл часть вашего драгоценного&nbsp;трафика.">
    <meta name="keywords" content="blog,developer,personal">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="15 полезных htaccess трюков для улучшения работы веб-сайта"/>
<meta name="twitter:description" content="1. Защита от хотлинкинга &nbsp;с&nbsp;.htaccess Сайты, которые крадут ваш контент могут весьма и весьма раздражать. К тому&nbsp;же они могут повредить рейтинг сайта, так как &nbsp;создают дублируемый в интернете контент. Но есть &nbsp;случаи и похуже&nbsp;&mdash; это сайты, которые не просто &laquo;тырят&raquo; ваш контент, но и&nbsp;не утруждают себя перелинковкой и загрузкой изображений на собственный сервак. А это уж совсем нехорошо.&nbsp;Загрузка изображений с вашего сервера называется хотлинкинг, &nbsp;и это значит, что в таком случае сайт-вор украл часть вашего драгоценного&nbsp;трафика."/>

    <meta property="og:title" content="15 полезных htaccess трюков для улучшения работы веб-сайта" />
<meta property="og:description" content="1. Защита от хотлинкинга &nbsp;с&nbsp;.htaccess Сайты, которые крадут ваш контент могут весьма и весьма раздражать. К тому&nbsp;же они могут повредить рейтинг сайта, так как &nbsp;создают дублируемый в интернете контент. Но есть &nbsp;случаи и похуже&nbsp;&mdash; это сайты, которые не просто &laquo;тырят&raquo; ваш контент, но и&nbsp;не утруждают себя перелинковкой и загрузкой изображений на собственный сервак. А это уж совсем нехорошо.&nbsp;Загрузка изображений с вашего сервера называется хотлинкинг, &nbsp;и это значит, что в таком случае сайт-вор украл часть вашего драгоценного&nbsp;трафика." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://altyncev.ru/blog/2012-08-27-15_pravil_htaccess/" />
<meta property="article:published_time" content="2012-08-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2012-08-27T00:00:00+00:00" />


    <title>
  15 полезных htaccess трюков для улучшения работы веб-сайта · Altyncev Vladislav
</title>

    
      <link rel="canonical" href="https://altyncev.ru/blog/2012-08-27-15_pravil_htaccess/">
    

    <link href="https://fonts.googleapis.com/css?family=Gabriela&display=swap&subset=cyrillic,cyrillic-ext" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fork-awesome/1.1.7/css/fork-awesome.min.css" integrity="sha512-9QjPqX/aCNwEQDyMqqMluNOSsHxTwOJNO3d4m5aUeNbyOPm8RcBA5hCUhvGmKFtSmQYGajqPopGtD60FWiWUwg==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" />
    
      
      
      <link rel="stylesheet" href="https://altyncev.ru/css/coder.min.614ec27e30601480e6f78f576733a3757458d35b4ec53a05b9ac4dbe0dfc342d.css" integrity="sha256-YU7CfjBgFIDm949XZzOjdXRY01tOxToFuaxNvg38NC0=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="https://altyncev.ru/css/coder-dark.min.126ad3988d46bdae6217a11105b53c9662bca05f39d42d3c0fb366919d334620.css" integrity="sha256-EmrTmI1Gva5iF6ERBbU8lmK8oF851C08D7NmkZ0zRiA=" crossorigin="anonymous" media="screen" />
      
    

    

    
      
      
        
        <link rel="stylesheet" href="https://altyncev.ru/scss/custom.min.c80b4266c2e473bbcd265ff75587773f79318d2c22b98f94d66e006670afce2c.css" integrity="sha256-yAtCZsLkc7vNJl/3VYd3P3kxjSwiuY&#43;U1m4AZnCvziw=" crossorigin="anonymous" media="screen" />
      
    

    <link rel="icon" type="image/png" href="https://altyncev.ru/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://altyncev.ru/favicon-16x16.png" sizes="16x16">

    <link rel="apple-touch-icon" href="https://altyncev.ru/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://altyncev.ru/images/apple-touch-icon.png">

    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/twemoji.min.js" integrity="sha512-panBjUGuKarjg0qxHggQULmRf9jB/YVCy238hmzBWUuLeOuwMSuJgJcUv3T+rwXUBZ9zeUvc49ZcCRH+EO0H8g==" crossorigin="anonymous"></script>
    

    <meta name="generator" content="Hugo 0.74.3" />

    <style>.async-hide { opacity: 0 !important} </style>
    <script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
    h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
    (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
    })(window,document.documentElement,'async-hide','dataLayer',4000,
    {'GTM-5SXTLZK':true});</script>

    <script>
      var doNotTrack = false;
      if (!doNotTrack) {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-2789259-4', 'auto');
        ga('require', 'GTM-5SXTLZK');
        ga('send', 'pageview');
      }
    </script>
  </head>

  
  
    
  
  <body class="colorscheme-auto"
        onload=" twemoji.parse(document.body); "
  >

     <script type="text/javascript" > (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(17143639, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true }); </script> <noscript><div><img src="https://mc.yandex.ru/watch/17143639" style="position:absolute; left:-9999px;" alt="" /></div></noscript> 

    
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://altyncev.ru/">
      Altyncev Vladislav
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/blog/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/categories/cottage/">Handmade</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/portfolio/">Portfolio</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://altyncev.ru/categories/">Categories</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>15 полезных htaccess трюков для улучшения работы веб-сайта</h1>
    </header>

    
<h2>1. Защита от хотлинкинга &nbsp;с&nbsp;.htaccess</h2>
<p>Сайты, которые крадут ваш контент могут весьма и весьма раздражать. К тому&nbsp;же они могут повредить рейтинг сайта, так как &nbsp;создают дублируемый в интернете контент. Но есть &nbsp;случаи и похуже&nbsp;&mdash; это сайты, которые не просто &laquo;тырят&raquo; ваш контент, но и&nbsp;не утруждают себя перелинковкой и загрузкой изображений на собственный сервак. А это уж совсем нехорошо.&nbsp;Загрузка изображений с вашего сервера называется хотлинкинг, &nbsp;и это значит, что в таком случае сайт-вор украл часть вашего драгоценного&nbsp;трафика.</p>

<!-- Read more -->

<p>Для профилактики людей от таких нехороших веб-мастеров можно включить следующие строки &nbsp;файл .htaccess (очевидно, заменяйте &laquo;<em>yoursite.com&raquo; на&nbsp;</em>&nbsp;адрес вашего&nbsp;сайта)</p>
<blockquote><p><em>RewriteBase&nbsp;/&nbsp;</em><br />
<em>RewriteCond% {HTTP_REFERER} ^&nbsp;$!&nbsp;</em><br />
<em>RewriteCond% {HTTP_REFERER} ^ http:// (www.) yoursite.com / * $&nbsp;[NC]!?.&nbsp;</em><br />
<em>RewriteRule (GIF | JPG | SWF | FLV | PNG). $ / подача /&nbsp;[R = 302, L]</em></p></blockquote>
<h2>2.&nbsp;Предотвращение просмотра&nbsp;директорий и&nbsp;файлов</h2>
<p>В то время как просмотр&nbsp;директорий и файлов &nbsp;может быть полезным, он также может вызвать некоторые проблемы с безопасностью.&nbsp;Чтобы сделать ваш сайт более безопасным, предотвратите такой просмотр , включив следующий сниппет в&nbsp;.htaccess.</p>
<blockquote><p><em>Options All&nbsp;-Indexes</em></p></blockquote>
<h2>3. 301 редирект &nbsp;- ведь это хорошо для&nbsp;SEO</h2>
<p>Я использовал эту очень часто, почти на каждом сайте, где я изменил URL структуры &nbsp;при помощи редизайна&nbsp;или опций сервера. Чтобы перенаправить старые страницы на&nbsp;их новый адрес в удобном для пользователя виде, можно использовать &nbsp;сниппет&nbsp;в&nbsp;.htaccess:</p>
<blockquote><p><em>Redirect 301 http://www.yoursite.com/article.html http://www.yoursite.com/archives/article</em></p></blockquote>
<h2>4. &nbsp;Установить Email для администратора&nbsp;сайта</h2>
<p>Используя данный код вы можете по умолчанию установить &nbsp;Using this code you can specifying the default email address for the server&nbsp;administrator.</p>
<blockquote><p><em>ServerSignature&nbsp;EMail</em><br />
<em>SetEnv SERVER_ADMIN&nbsp;default@domain.com</em></p></blockquote>
<h2>5.&nbsp;Отображение страницы ошибки&nbsp;404</h2>
<p>Когда посетитель пытается получить доступ к некоторым страницам вашего сайта, которых больше не существует, сервер отображает страницу с сообщением &laquo;404 файл не найден&raquo;.&nbsp;Некоторые CMS позволяет устанавливать &nbsp;специальные пользовательские страницы ошибки 404, но самый простой способ&nbsp;&mdash; включить следующую строку в файл&nbsp;.htaccess.</p>
<blockquote><p><em>ErrorDocument 404 /&nbsp;404.html</em></p></blockquote>
<h2>6.&nbsp;Настройки по умолчанию страницы&nbsp;каталога</h2>
<p>Если по&nbsp;какой-то&nbsp;причине вам нужно cделать так, чтобы &nbsp;страницы каталога отличались. Сделать это очень легко при помощи .htaccess.&nbsp;Например, если вы хотите, чтобы файл default.html стал страницей по умолчанию, просто добавьте эту&nbsp;строку.</p>
<blockquote><p><em>DirectoryIndex&nbsp;about.html</em></p></blockquote>
<h2>7. &nbsp;Редирект со старого домена на&nbsp;новый</h2>
<p>Используя .htaccess файл вы можете перенаправлять пользователей со старого домена на новый. Для этого достаточно использовать&nbsp;код:</p>
<blockquote><p><em># redirect from old domain to new&nbsp;domain</em><br />
<em>RewriteEngine&nbsp;On</em><br />
<em>RewriteRule ^(.*)$ http://www.yourdomain.com/$1&nbsp;[R=301,L]</em></p></blockquote>
<h2>8.&nbsp;Блок нежелательных&nbsp;посетителей</h2>
<p>Xороший веб-мастер не станет блокировать трафик, а наоборот заинтересован в привлечении новых пользователей на сайт. Но если вы заметили, что сайт регулярно атакуют спамеры и тролли, не стоит долго ждать. Лучше сразу прописать следующий код и заблокировать потом спамеров с определенного доменного&nbsp;имени.</p>
<blockquote><p><em>&lt;IfModule&nbsp;Mod_rewrite.c&gt;&nbsp;</em><br />
<em>RewriteEngine на RewriteCond% {HTTP_REFERER} spamteam.com&nbsp;[NC, OR]&nbsp;</em><br />
<em>RewriteCond% {HTTP_REFERER} trollteam.com&nbsp;[NC, OR]&nbsp;</em><br />
<em>RewriteRule. *&nbsp;&mdash;&nbsp;[F]&nbsp;</em><br />
<em>&lt;/ IfModule&gt; &nbsp;</em></p></blockquote>
<h2>9.&nbsp;Укажите лимит загрузки файлов для PHP в&nbsp;Htaccess</h2>
<p>Эта опция заслуживает внимания если вы используете &nbsp;Drupal на виртуальном хостинге. Мне пришлось сбросить лимит для загрузки файлов, чтобы мои клиенты могли загружать большие файлы.&nbsp;Первое &nbsp;изменение&nbsp;&mdash; это&nbsp;максимальный размер файла для загрузки, второе&nbsp;&mdash; максимальный размер отправленных данных, третье&nbsp;&mdash; максимальное время в секундах на обработку запроса. При этом скрип можно запускать до того, как заканчивает работу парсер. Самый последний код&nbsp;&mdash; это &nbsp;максимальное время в секундах для обработки &nbsp;сценария. &nbsp;Допускается для анализа входных данных, например, таких как загрузка файлов на сервер, POST и&nbsp;GET-данных.</p>
<blockquote><p><em>php_value upload_max_filesize&nbsp;20M&nbsp;</em><br />
<em>php_value post_max_size&nbsp;20M&nbsp;</em><br />
<em>php_value max_execution_time&nbsp;200&nbsp;</em><br />
<em>php_value max_input_time&nbsp;200</em></p></blockquote>
<h2>10.&nbsp;Сжатие&nbsp;файлов</h2>
<p>Скорость загрузки страницы можно увеличить при помощи сжатия файлов. Вот пример того, как этого&nbsp;добиться.</p>
<blockquote><p><em>AddOutputFilterByType DEFLATE&nbsp;text/plain</em><br />
<em>AddOutputFilterByType DEFLATE&nbsp;text/html</em><br />
<em>AddOutputFilterByType DEFLATE&nbsp;text/xml</em><br />
<em>AddOutputFilterByType DEFLATE&nbsp;text/css</em><br />
<em>AddOutputFilterByType DEFLATE&nbsp;application/xml</em><br />
<em>AddOutputFilterByType DEFLATE&nbsp;application/xhtml+xml</em><br />
<em>AddOutputFilterByType DEFLATE&nbsp;application/rss+xml</em><br />
<em>AddOutputFilterByType DEFLATE&nbsp;application/javascript</em><br />
<em>AddOutputFilterByType DEFLATE&nbsp;application/x-javascript</em></p></blockquote>
<h2>11.&nbsp;Кэш&nbsp;файлов</h2>
<p>Чтобы оптимизировать скорость кэширования файлов используйте&nbsp;сниппет:</p>
<blockquote><p><em>&lt;FilesMatch&nbsp;&ldquo;.(flv|gif|jpg|jpeg|png|ico|swf|js|css|pdf)$&rdquo;&gt;</em><br />
<em>Header set Cache-Control&nbsp;&ldquo;max-age=2592000&Prime;</em><br />
<em></FilesMatch></em></p></blockquote>
<h2>12. Редирект пользователей на разные сайты за исключением нескольких&nbsp;IP-адресов</h2>
<p>Ежели вы желаете отправить посетителей сайна на разные IP-адреса&nbsp;или же дать доступ к определенным IP-адресам, то можно использовать следующий&nbsp;код:</p>
<blockquote><p><em>ErrorDocument 403&nbsp;http://www.youdomain.com</em><br />
<em>Order&nbsp;deny,allow</em><br />
<em>Deny from&nbsp;all</em><br />
<em>Allow from&nbsp;124.34.48.165</em><br />
<em>Allow from&nbsp;102.54.68.123</em></p></blockquote>
<h2>13.&nbsp;&nbsp;Конечный&nbsp;слэш</h2>
<p>Я не могу этого доказать, но я читал бесчисленное количество раз, что добавлять слеш в конце URL хорошо для SEO и загрузки страницы.&nbsp;Если вам также известно такое мнение, то можно добавить следующий сниппет в&nbsp;&nbsp;.htaccess.</p>
<blockquote><p><em>&lt;IfModule&nbsp;Mod_rewrite.c&gt;&nbsp;</em><br />
<em>RewriteCond% {REQUEST_URI} / + [^ \.]+&nbsp;$&nbsp;</em><br />
<em>RewriteRule ^ (. + [^ /]) $% {REQUEST_URI} /&nbsp;[R = 301, L]&nbsp;</em><br />
<em>&lt;/&nbsp;IfModule&gt;</em></p></blockquote>
<h2>14. Не показывать запрос о загрузке&nbsp;файлов</h2>
<p>Обычно, если вы собираетесь загрузить&nbsp;какой-либо&nbsp;файл, то сначала появляется запрос, спрашивающий вас&nbsp;&mdash; действительно&nbsp;ли Вы хотите загрузить тот&nbsp;или другой файл. Чтоб избежать лишней траты времени пользователей добавьте следующий код в &nbsp;&nbsp;.htaccess&nbsp;файл.</p>
<blockquote><p><em>AddType application/octet-stream&nbsp;.pdf</em><br />
<em>AddType application/octet-stream&nbsp;.zip</em><br />
<em>AddType application/octet-stream .mov</em></p></blockquote>
<h2>15. &nbsp;Изменяем тип&nbsp;файлов</h2>
<p>Любые файлы можно переобразовать в одну группу. Будь то &nbsp;image.jpg, index.html,&nbsp;или default.cgi&nbsp;&mdash; все будут действовать как&nbsp;php</p>
<blockquote><p><em>&lt;Files&nbsp;test&gt;</em><br />
<em>ForceType&nbsp;application/x-httpd-php</em><br />
<em>SetHandler&nbsp;application/x-httpd-php</em><br />
<em>&lt;/Files&gt;</em></p></blockquote>
<p>&nbsp;</p>
<p style="text-align: right;">пруф:&nbsp;<a href="http://www.dejurka.ru/web-design/1-useful-htaccess-tricks-to-improve-your-website/">http://www.dejurka.ru/web-design/1-useful-htaccess-tricks-to-improve-your-website/</a></p>
<p>&nbsp;</p>

  </article>
</section>

  

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>Welcome.</p>
      
      
        ©
        
          2012 -
        
        2020
         Vladislav Altyncev 
      
      
         · 
        Работает на <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
        
      
    </section>
  </footer>


    </main>

    
      
        
        <script src="https://altyncev.ru/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js"></script>
      
    

    

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-2789259-4', 'auto');
	
	ga('send', 'pageview');
}
</script>


    

    

    
  </body>

</html>
